# MANIFEST.MD

Complete inventory of all files in the Knowledge Chipper codebase with descriptions of actual functionality.

**Last Updated:** December 22, 2025

---

## ROOT DIRECTORY

### Configuration Files

- `.bandit` - Security linter configuration for identifying common security issues in Python code
- `.cache_state.json` - Cache state tracking for application runtime
- `.coverage` - Code coverage data generated by pytest-cov during test runs
- `.cursor_shell_config` - Cursor IDE shell environment configuration
- `.cursorindexingignore` - Patterns for files/directories to exclude from Cursor's code indexing
- `.cursorules` - Custom rules for Cursor AI assistant behavior in this workspace
- `.gitattributes` - Git line ending and merge strategy configuration
- `.gitignore` - Specifies intentionally untracked files for Git to ignore
- `.pre-commit-config.yaml` - Pre-commit hook configuration for automated code quality checks (black, flake8, mypy, bandit)
- `.python-version` - Python version specification (3.11.x) for pyenv version management
- `.secrets.baseline` - Baseline file for detect-secrets tool to track known false positives
- `pyproject.toml` - Python project metadata, dependencies, and build configuration (single source of truth for version numbers)
- `pyrightconfig.json` - Pyright static type checker configuration with strict type checking rules
- `pytest.ini` - Pytest configuration for main test suite (markers, coverage, warnings)
- `pytest.ini.gui_testing` - Separate pytest configuration for GUI tests with xvfb support
- `requirements.txt` - Production Python dependencies with pinned versions
- `requirements-dev.txt` - Development dependencies (testing, linting, type checking tools)

### Build and Deployment

- `Makefile` - Build automation for common development tasks (test, lint, format, install)
- `Makefile.hce` - Build automation specific to HCE (Hybrid Claim Extraction) system
- `SkipThePodcast.pkgproj` - Packages.app project file for building macOS .dmg installer
- `launch_gui.command` - Shell script to launch GUI application on macOS with proper environment setup

### Documentation - Project Status

- `ACTIVE_TODOS.md` - Current active tasks and work in progress
- `ALL_FIXES_COMPLETE.md` - Comprehensive list of all bug fixes that have been completed
- `ALL_IMPLEMENTATION_COMPLETE.md` - List of all major features that have been fully implemented
- `ALL_TRANSCRIPTION_FIXES_COMPLETE.md` - Comprehensive list of all transcription-related bug fixes completed
- `ANTI_BOT_CRITICAL_FIXES.md` - Documentation of anti-bot detection fixes for YouTube downloads
- `ARCHIVE_VALIDATION_FIX.md` - Fix for archive validation issues
- `CHANGELOG.md` - Chronological record of all notable changes to the project
- `CLAUDE.md` - Guidance document for Claude Code AI assistant when working with this codebase
- `DIARIZATION_DEPRECATED.md` - Documentation of diarization system deprecation: removed complex 6-stage audio processing pipeline in favor of LLM-based speaker inference from content (simpler, faster, more accurate)
- `AUTO_SYNC_IMPLEMENTATION_COMPLETE.md` - **NEW (Dec 22, 2025):** Auto-sync implementation with close protection: items automatically sync to GetReceipts on accept, close warning prevents data loss, offline support with queue-for-sync, follows standard best practices (Gmail/Slack patterns)
- `EXTRACT_TAB_UI_IMPROVEMENTS.md` - **NEW (Dec 22, 2025):** Extract tab UI improvements: consistent dark theme, removed tier filter, renamed Video→Source, compact inline review status, dual progress bars (current file + batch)
- `CODE_DUPLICATION_ELIMINATION.md` - Refactoring to eliminate 70+ lines of duplicated code in summarization tab by extracting helper methods for settings building and worker creation
- `COLOR_CODED_AND_THUMBNAIL_FIX.md` - Fix for color coding and thumbnail display issues
- `CONTRIBUTING.md` - Guidelines for contributing to the project (code style, PR process, testing)
- `CURRENT_ACTIVE_PROMPTS.md` - Full text and documentation of the 2 prompts used in the active two-pass architecture: Pass 1 (extraction_pass.txt - whole-document extraction & scoring) and Pass 2 (synthesis_pass.txt - long summary synthesis). Includes system integration diagram and usage examples. Both prompts are fully wired up and functional.
- `DEPLOYMENT_READY.txt` - Deployment readiness checklist and status
- `FINAL_INTEGRATION_STATUS.md` - Status of final system integration across all components
- `FLAGSHIP_EVALUATOR_MODEL_DEFAULT_FIX.md` - Fix for Flagship Evaluator Model dropdown appearing empty on launch due to mismatch between stored model names and displayed names with "(Installed)" suffix
- `FOREIGN_KEY_CONSTRAINT_FIX.md` - Fix for foreign key constraint errors when creating stage statuses before MediaSource records exist
- `GUI_TESTING_INTEGRATION_COMPLETE.md` - Documentation of completed GUI testing integration
- `MENTAL_MODELS_SCHEMA_FIX.md` - Complete v1→v2 schema migration: replaced v1 with v2 structure to eliminate all transformations (nested evidence_spans, definition field, full alignment)
- `MODEL_DEFAULT_FIX.md` - Fix for model default selection issues
- `SCHEMA_STRATEGY_CURRENT_STATE.md` - Comprehensive analysis of schema evolution: why grammar-enforced structured outputs were abandoned for JSON mode + post-validation (5-6x faster)
- `SCHEMA_VALIDATION_FIX.md` - Fix for schema validation errors: corrected context_type enum mismatch (sentence/paragraph → exact/extended/segment) and removed domain enum constraint to allow free-form domain descriptions
- `SCHEMA_REPAIR_DOMAIN_FIX.md` - Fix for missing domain field in claims: added repair logic to automatically set domain="general" when LLMs omit the required field, preventing validation failures and fallback to non-structured JSON generation
- `CLAIM_DOMAIN_IMPLEMENTATION.md` - Implementation of domain field for claims: added database field, updated all miner prompts with broad category guidance, and ensured open-ended classification for searchability
- `SUMMARIZE_TAB_REFRESH_FIX.md` - Fix for Summarize tab database list not automatically refreshing when new transcripts are added: added showEvent() handler to refresh on tab visibility and enhanced diagnostic logging for orphaned transcripts
- `SUMMARIZE_TAB_SELECTION_FIX.md` - Fix for Summarize tab selection issues
- `TRANSCRIBED_VIDEOS_NOT_IN_SUMMARIZE_TAB_FIX.md` - Fix for transcribed YouTube videos not appearing in Summarize tab: AudioProcessor was generating new source_ids instead of reusing existing ones from YouTube downloads, creating orphaned Transcript records not linked to MediaSource records
- `GUI_SETTINGS_PERSISTENCE_AUDIT.md` - Audit results of GUI settings persistence implementation
- `IMPLEMENTATION_SUMMARY.md` - High-level summary of major implementation milestones
- `OUTPUT_DIRECTORY_BUG_FIX.md` - Fix for bug where Summarize tab displayed user-selected output directory but saved files to default location
- `LICENSE` - MIT License for the project
- `README.md` - Main project documentation with installation, usage, and feature overview
- `TESTING_CHECKLIST.md` - Comprehensive checklist for testing all system features
- `TIMER_REDUNDANCY_AUDIT.md` - Detailed audit of suspicious timer patterns, confirming both are legitimate (sequential initialization and immediate+periodic refresh patterns)

### Documentation - New Features (November 2025)

- `QUESTION_MAPPER_IMPLEMENTATION_SUMMARY.md` - Complete implementation of question mapping system: 3-stage LLM pipeline (discovery, merger, assignment) with database schema, ORM models, GUI tab, and 14 unit tests
- `QUESTION_MAPPER_USAGE_GUIDE.md` - User guide for question mapper system with usage examples and workflow documentation
- `REFACTORING_NOVEMBER_2025.md` - Documentation of November 2025 refactoring efforts
- `COOKIE_PERSISTENCE_DIAGNOSIS_2025_11_10.md` - Diagnosis of cookie persistence issues
- `COOKIE_PERSISTENCE_FIX.md` - Fix for cookie file persistence between sessions (root directory version)
- `SINGLE_SPEAKER_DIAGNOSIS_ENHANCEMENT.md` - Enhancements to single-speaker detection diagnostics
- `SPEAKER_AND_THUMBNAIL_FIXES_NOV_2025.md` - November 2025 fixes for speaker attribution and thumbnail handling
- `SPEAKER_ASSIGNMENT_NOT_INVOKED_FIX.md` - Fix for speaker assignment not being invoked during processing
- `SPEAKER_DIARIZATION_FIX.md` - Fix for speaker diarization issues
- `TEST_INFRASTRUCTURE_FIXES_APPLIED.md` - Documentation of applied test infrastructure fixes
- `TEST_INFRASTRUCTURE_FIXES_SUMMARY.md` - Summary of test infrastructure improvements
- `TEST_RUN_REPORT_2025_11_10.md` - Test run report from November 10, 2025

### Documentation - Web-Canonical Architecture (November 2025)

- `ARCHITECTURE_WEB_CANONICAL.md` - Complete architecture documentation for web-canonical system (see Architecture and Systems section)
- `VERCEL_ENV_SETUP.md` - Guide for adding SUPABASE_SERVICE_ROLE_KEY environment variable to Vercel deployment
- `MIGRATION_CHECK.md` - Diagnosis guide for missing database migration columns (device_id, source_id, etc.) with verification steps
- `READY_TO_TEST.md` - Testing guide for web-canonical architecture end-to-end workflow
- `QUICK_START.md` - Quick start guide for testing web-canonical upload functionality
- `DEPLOYMENT_STATUS.md` - Deployment status tracking for GetReceipts backend with web-canonical support

### Documentation - Batch Processing

- `BATCH_7000_M2_ULTRA_128GB_OPTIMIZED.md` - Optimization strategy for processing 7000 videos on M2 Ultra hardware
- `BATCH_7000_VIDEOS_QUICK_REFERENCE.md` - Quick reference guide for large batch processing operations
- `BATCH_PROCESSING_7000_VIDEOS_ANALYSIS.md` - Analysis of requirements and constraints for 7000 video batch
- `BATCH_PROCESSING_CLEANUP_SUMMARY.md` - Summary of batch processing cleanup and optimization work
- `BUTTON_STUCK_FIX.md` - Fix for Start Summarization button getting stuck at "Checking model availability" when using local models with installed models
- `MASSIVE_BATCH_OPTIMIZATION_CORRECTED.md` - Corrected optimization strategy for massive batch operations
- `MASSIVE_BATCH_OPTIMIZATION_STRATEGY.md` - Original strategy document for massive batch processing
- `READY_FOR_7000_VIDEOS.md` - System readiness confirmation for 7000 video batch processing

### Documentation - Multi-Account System

- `M2_ULTRA_6_ACCOUNT_OPTIMIZATION.md` - Optimization guide for 6-account parallel download setup
- `MULTI_ACCOUNT_CONCURRENCY_BUG.md` - Critical bug report: multi-account system using sequential rotation instead of concurrent downloads (3-5x slower than intended)
- `MULTI_ACCOUNT_FAQ.md` - Frequently asked questions about multi-account YouTube download functionality
- `MULTI_ACCOUNT_GUI_IMPLEMENTATION.md` - Implementation details for multi-account GUI features
- `MULTI_ACCOUNT_IMPLEMENTATION_STATUS.md` - Status tracking for multi-account feature implementation
- `MULTI_ACCOUNT_INTEGRATION_COMPLETE.md` - Completion documentation for multi-account integration
- `MULTI_ACCOUNT_VS_SINGLE_ACCOUNT_CODE_PATHS.md` - Comparison of code paths for single vs multi-account modes
- `SESSION_BASED_ANTI_BOT_COMPLETE.md` - Completion documentation for session-based anti-bot system
- `SESSION_BASED_ANTI_BOT_IMPLEMENTATION.md` - Implementation details for session-based anti-bot detection avoidance

### Documentation - Claims-First Architecture (December 2025)

- `CLAIMS_FIRST_ARCHITECTURE_OVERHAUL_PLAN.md` - Original design document for claims-first architecture migration: speaker-first problems, proposed solution, implementation phases, risk analysis
- `EXTRACTION_ARCHITECTURE_ANALYSIS.md` - Deep analysis of single-stage vs dual-stage extraction, recommending dual-stage with Gemini mining + Claude evaluation
- `CLAIMS_FIRST_MIGRATION_GUIDE.md` - User guide for migrating to claims-first pipeline: configuration options, rollback instructions, troubleshooting

### Documentation - Architecture and Systems

- `docs/FILE_ORGANIZATION.md` - Comprehensive guide to output file organization: explains directory structure (transcripts/, summaries/, moc/, exports/), file naming conventions, relationship between transcript and summary files, database as source of truth, and how to find/regenerate files. Addresses common confusion about where files are saved and why they don't overwrite each other.
- `ARCHITECTURE_WEB_CANONICAL.md` - Complete architecture documentation for web-canonical implementation where GetReceipts Supabase is single source of truth and Knowledge_Chipper acts as ephemeral processor. Documents philosophy, workflows, database schemas, user experience, API endpoints, and rollback instructions.
- `PROMPT_INVENTORY.md` - Complete catalog of all prompts in the system: ACTIVE two-pass architecture uses 2 core prompts (extraction_pass.txt + synthesis_pass.txt) plus 3 optional question mapper prompts; documents 15 deprecated HCE segment-based prompts; explains architecture comparison, system integration, and migration status. Both active prompts are fully wired up and functional.
- `VESTIGIAL_CODE_ANALYSIS.md` - Comprehensive analysis of unused/vestigial code from pre-unified-pipeline architecture, including old extraction modules (people.py, glossary.py, concepts.py, skim.py), unused prompt files (judge_high/low variants), and unimplemented features (relations, contradictions). Documents architecture evolution and provides removal recommendations.
- `VESTIGIAL_CODE_REMOVAL_COMPLETE.md` - Completion documentation for vestigial code cleanup: moved 4 old extraction modules and 12 unused prompt files to _deprecated/, updated __init__.py, verified all imports still work. Includes before/after architecture comparison, verification tests, and rollback plan.
- `VESTIGIAL_PROMPT_PICKER_REMOVED.md` - Documentation of removal of non-functional prompt file picker from Summarization tab
- `COMPLETE_SETTINGS_HIERARCHY_FIX.md` - Documentation of settings hierarchy refactoring and fixes
- `DEDUPLICATION_FIX.md` - Fix for URL deduplication logic that was incorrectly skipping incomplete downloads
- `DEFAULT_MODEL_CHANGED_TO_MEDIUM.md` - Documentation of default Whisper model change from base to medium
- `DEPENDABOT_SETUP_COMPLETE.md` - Dependabot configuration for automated dependency updates
- `DEVICE_AUTO_PATTERN_ANALYSIS.md` - Analysis of automatic device selection patterns for Whisper
- `DEVICE_BUG_CLASS_SUMMARY.md` - Classification of device-related bugs and their fixes
- `DEVICE_SETTING_BUG_FIX.md` - Fix for device setting persistence and selection bugs
- `DOWNLOAD_FIXES_SUMMARY.md` - Summary of all download-related bug fixes
- `HALLUCINATION_AND_DEFAULT_MODEL_COMPLETE.md` - Completion doc for hallucination prevention and model changes
- `HALLUCINATION_PREVENTION_COMPLETE.md` - Documentation of Whisper hallucination prevention implementation
- `HCE_FIXES_SUMMARY.md` - Summary of all HCE (Hybrid Claim Extraction) system fixes
- `HOW_TO_TEST.md` - Comprehensive testing guide for all system components
- `INTRODUCTION_TAB_CONTROL_IMPLEMENTATION.md` - Implementation of user-controllable Introduction tab visibility
- `MULTI_SOURCE_DEDUPLICATION_COMPLETE.md` - Completion doc for multi-source deduplication system
- `PHANTOM_OPTIONS_AUDIT.md` - Audit of phantom/unused configuration options
- `QUEUE_TAB_FIXES_COMPLETE.md` - Documentation of Queue tab bug fixes: JSON error in view details, failed items not clearing, and missing hyperlinks to completed files
- `QUEUE_TAB_FINAL_REPORT.md` - Final report on Queue tab implementation
- `QUEUE_TAB_IMPLEMENTATION_SUMMARY.md` - Summary of Queue tab implementation
- `QUEUE_TAB_MANUAL_VERIFICATION_PLAN.md` - Manual verification plan for Queue tab
- `QUEUE_TAB_MIGRATION_GUIDE.md` - Migration guide for Queue tab
- `RECOVERY_COMPLETE.md` - Documentation of system recovery from critical issues
- `REDUNDANCY_PATTERNS_ANALYSIS.md` - Analysis of timer-based redundant initialization patterns found in GUI code, with search strategies and audit checklist for finding similar issues
- `SCHEMA_CONFLICTS.md` - Documentation of database schema conflicts and resolutions
- `SETTINGS_HIERARCHY_FIX_PROGRESS.md` - Progress tracking for settings hierarchy refactoring
- `SETTINGS_SINGLE_SOURCE_OF_TRUTH_FIX.md` - Fix for settings having multiple conflicting sources of truth
- `SIDECAR_FILES_ELIMINATED.md` - Documentation of sidecar file elimination in favor of database storage
- `SOURCE_ID_GENERATION_GUIDE.md` - Guide for generating and managing source IDs across the system
- `SPEAKER_ATTRIBUTION_UPGRADE_COMPLETE.md` - Completion doc for speaker attribution system upgrade
- `TIMEOUT_FIXES_COMPLETE.md` - Fix for hardcoded LLM timeout values that were overriding configuration settings
- `ROBUST_LLM_FALLBACK_SYSTEM.md` - November 10, 2025 enhancement: 5-tier fallback system that uses ANY available Ollama model rather than failing. Priority: (1) Preferred models, (2) Any Qwen, (3) Any Llama, (4) Any instruct model, (5) Any model. Ensures speaker attribution never fails when models are installed, with transparent logging of which tier is used
- `SPEAKER_ATTRIBUTION_DEBUG_GUIDE.md` - Comprehensive debug guide for speaker attribution issues: explains why SPEAKER_01 labels appear instead of real names, documents model name mismatch problem, provides diagnostic steps and solutions for ensuring MVP LLM (Gwen/Qwen) is properly detected and used with CSV mappings
- `SPEAKER_ATTRIBUTION_MODEL_NAME_FIX.md` - November 10, 2025 fix for model name mismatch: installation scripts pulled "qwen2.5:7b" but code expected "qwen2.5:7b-instruct". Documents Ollama's behavior of stripping -instruct suffix when storing models, updated MVP_MODEL_ALTERNATIVES to match actual Ollama names, removed fuzzy matching logic
- `SUMMARY_FORMAT_CODE_PATH_CONSOLIDATION.md` - November 10, 2025 elimination of duplicate summary generation code path. Removed generate_summary_markdown_from_pipeline() which was creating inconsistent formats with bugs. Unified pipeline now uses standard generate_summary_markdown() → _generate_hce_markdown() for ONE consistent format. Includes before/after comparison and explanation of why duplicate code paths are problematic
- `SCHEMA_MIGRATION_COMPLETION.md` - November 10, 2025 completion of incomplete episode-centric to claim-centric schema migration. Fixed 10 remaining references to old schema (video_id → source_id, get_video() → get_source()) across system2_orchestrator.py, file_generation.py, and speaker_processor.py. Documents root cause analysis, verification process, and lessons learned about incremental migrations
- `TRANSCRIPTION_TO_SUMMARIZATION_WORKFLOW.md` - November 10, 2025 enhancement for seamless transcription-to-summarization workflow. When clicking "Summarize Transcript" after transcription, the system now automatically: (1) switches to Database mode, (2) checks boxes for all transcribed sources, (3) immediately starts summarization. Leverages database-first architecture where rich segments (timestamps, speakers, metadata) are used instead of parsing markdown files. Documents implementation, benefits, and user experience improvements
- `TRANSCRIPT_DISPLAY_FIX_NOV_2025.md` - Fix for duplicate titles in Obsidian (removed redundant H1 heading) and improved filename readability (preserved spaces instead of underscores)
- `TRANSCRIPT_FORMATTING_FIXES_NOV_2025.md` - November 10, 2025 fixes: YouTube Description header (conditional on source type), removed "_transcript" suffix from filenames, optimized paragraph breaking (500 char max, 3s pause threshold for better readability), documented speaker attribution LLM requirement
- `TRANSCRIPT_FORMATTING_FIXES.md` - Additional transcript formatting fixes
- `TRANSCRIPT_FORMATTING_IMPROVEMENTS.md` - Complete redesign of human-readable transcript formatting with intelligent paragraph grouping based on speaker changes, pauses, sentence boundaries, and character limits. Includes before/after examples and technical details of the paragraph grouping algorithm.
- `TRANSCRIPTION_ERRORS_FOUND.md` - Documentation of transcription errors discovered
- `TRANSCRIPTION_FIX_APPLIED.md` - Documentation of applied transcription fixes
- `TRANSCRIPTION_TEST_RESULTS.md` - Results from transcription testing
- `UI_LAYOUT_AND_VALIDATION_FIX.md` - Fixes for UI layout and validation issues
- `VOICE_FINGERPRINTING_FIX_NOV_2025.md` - Fix for voice fingerprinting not merging speakers in single-speaker monologues. Root cause: system was receiving wrong audio file path (original input file instead of converted 16kHz mono WAV used for diarization), preventing proper audio segment extraction and voice similarity analysis. Fixed by passing output_path instead of path to prepare_speaker_data().
- `VOICE_FINGERPRINTING_DIAGNOSIS_NOV_2025.md` - Comprehensive diagnostic enhancements for voice fingerprinting system. Added detailed logging to identify why speakers aren't merging: feature extraction success/failure tracking, per-feature similarity scores, total weight calculation, and speaker comparison decisions. Documents two-tier system (audio-based + text fallback), possible root causes (missing deep learning models, audio extraction issues, threshold problems), and what to look for in logs.
- `SUNRISE_TAB_SORTING_FEATURE.md` - Documentation of sortable columns and Date Added feature in Sunrise tab database browser
- `SUNRISE_SORTING_DEMO.md` - Visual guide and usage examples for Sunrise tab sorting functionality
- `THUMBNAIL_FIX_V2.md` - Version 2 of thumbnail display fix
- `UNIFIED_DOWNLOAD_PATH_COMPLETE.md` - Completion doc for unified download path implementation
- `UNIFIED_DOWNLOAD_PATH_RECOMMENDATION.md` - Recommendations for unified download path architecture

### Documentation - Taxonomy and Categorization

- `PODCAST_TOPICS_TOP2000.md` - List of top 2000 podcast topics for categorization reference
- `PODCAST_VS_CONCEPTUAL_TAXONOMY.md` - Comparison of podcast-based vs conceptual taxonomy approaches
- `RECOMMENDED_TAXONOMY_APPROACH.md` - Recommended approach for taxonomy and categorization
- `WIKIDATA_506_CATEGORIES_LIST.md` - Complete list of 506 WikiData categories for knowledge classification
- `WIKIDATA_CONCEPTUAL_TAXONOMY.md` - Conceptual taxonomy structure based on WikiData categories
- `WIKIDATA_DOWNLOAD_STRATEGY.md` - Strategy for downloading and managing WikiData category data
- `WIKIDATA_PROVENANCE_AND_STABILITY.md` - Documentation of WikiData provenance tracking and stability
- `WIKIDATA_VOCABULARY_UPGRADED.md` - Documentation of WikiData vocabulary upgrades

### Documentation - RSS and YouTube Integration

- `YOUTUBE_TO_RSS_IMPLEMENTATION_COMPLETE.md` - Completion doc for YouTube to RSS mapping feature
- `YOUTUBE_TO_RSS_MIGRATION.md` - Migration guide for YouTube to RSS mapping system

### Data Files

- `speaker_attribution.with_podcasts.yaml` - 262+ podcast-to-host mappings for automatic speaker attribution
- `knowledge_system.db.backup.20251024_195602` - SQLite database backup from October 24, 2025
- `Do the same analysis for the transcription processes.docx` - Word document with transcription analysis

### Utility Scripts

- `analyze_code.py` - Code analysis utility script
- `check_cookie_persistence.py` - Script to check cookie persistence functionality
- `check_schema.py` - Script to check which tables exist in GetReceipts Supabase database, diagnoses missing schema migrations
- `compare_youtube_summaries.py` - **NEW (Dec 2025):** Compare YouTube AI summary vs Knowledge_Chipper local LLM summary side-by-side; shows timing, length, and quality comparison for testing
- `find_syntax_error.py` - Utility script to locate Python syntax errors in codebase
- `monitor_gui_tests.sh` - Shell script to monitor and report on GUI test execution
- `scrape_youtube_complete.py` - **NEW (Dec 2025):** Standalone YouTube scraper that extracts complete video data (metadata from yt-dlp, transcript from YouTube API, AI summary from Playwright scraping); outputs in Knowledge_Chipper markdown format with hyperlinked timestamps and thumbnail download
- `test_cookie_functionality.py` - Test script for cookie-based YouTube authentication
- `test_expanded_vocab.py` - Test script for expanded WikiData vocabulary
- `test_full_download_flow.py` - Integration test for complete download flow
- `test_multi_account_downloads.py` - Test script for multi-account download functionality
- `test_summarize_tab_refresh.py` - Test script for Summarize tab refresh functionality
- `test_summarize_tab_selection.py` - Test script for Summarize tab selection functionality
- `test_web_canonical_upload.py` - Automated test script for web-canonical upload workflow (device auth + upload)
- `test_youtube_ai_integration.py` - **NEW (Dec 2025):** Integration test for YouTube AI summary pipeline (download → scrape AI → save to DB → generate markdown)
- `debug_flagship_model.py` - Utility script for debugging the flagship model

### Claims-First Pipeline Scripts (December 2025)

- `scripts/apply_claims_first_migration.py` - Database migration script for claims-first schema changes
- `scripts/validate_claims_first.py` - Validation script to test claims-first pipeline on podcasts

### Hidden/Configuration Directories

- `.claude/` - Claude Code AI assistant configuration and settings
- `.cursor/` - Cursor IDE configuration and AI rules
- `.github/` - GitHub Actions workflows and repository configuration
  - `workflows/watch-deno-releases.yml` - GitHub Action to monitor Deno releases and create update issues (Deno required for yt-dlp YouTube downloads)
- `.obsidian/` - Obsidian vault metadata (project documentation as Obsidian vault)
- `.specstory/` - SpecStory configuration
- `_deprecated/` - Deprecated code storage (vestigial modules and unused prompt files)

---

## Assets/

Application assets and media files.

- `STP_Icon_1.ico` - Application icon in ICO format (Windows)
- `STP_Icon_1.jpeg` - Application icon in JPEG format
- `STP_Icon_1.jpg` - Application icon in JPG format
- `STP_Icon_1.png` - Application icon in PNG format
- `STP_Icon_1.psd` - Adobe Photoshop source file for application icon

---

## config/

Application configuration files and settings.

### Prompt Templates

- `prompts/create_moc_prompt.txt` - Prompt template for creating Maps of Content (MOC)
- `prompts/document_summary_prompt.txt` - Prompt template for summarizing documents
- `prompts/episode_summary_prompt.txt` - Prompt template for summarizing podcast/video episodes

### Configuration Files

- `settings.yaml` - Main application settings (user-specific, not in git)
- `settings.example.yaml` - Example settings file with all available options
- `credentials.yaml` - API credentials (user-specific, not in git)
- `credentials.example.yaml` - Example credentials file template
- `proxy.example.yaml` - Example proxy configuration
- `packetstream.yaml` - PacketStream proxy configuration
- `packetstream.example.yaml` - Example PacketStream configuration
- `disable_youtube_delays.yaml` - Configuration to disable YouTube download delays
- `obsidian_linking.yaml` - Obsidian note linking configuration
- `speaker_attribution.yaml` - Speaker attribution rules and mappings (main copy)
- `channel_hosts.csv` - CSV file mapping YouTube channels to host names
- `youtube_scraper.yaml` - **NEW (Dec 2025):** YouTube AI summary scraper configuration (timeouts, CSS selectors, fallback behavior)

### OAuth and Authentication

- `client_secret_901133876302-bkabhn1thi5a5hnn82emp49c29l4l7vs.apps.googleusercontent.com.json` - Google OAuth client secret
- `youtube_oauth2_credentials.json` - YouTube OAuth2 credentials
- `apple_signing_credentials.example` - Example Apple signing credentials for macOS builds

### Proxy Configuration

- `brightdata_proxy_ca/` - Bright Data proxy CA certificates directory
- `bright_data_setup.md` - Setup guide for Bright Data proxy service

### Other

- `dropdown_options.txt` - Configuration for dropdown menu options
- `Headers_to_YAML.txt` - Utility file for converting headers to YAML format
- `README.md` - Configuration directory documentation

---

## data/

Data storage directory.

- `knowledge_system.db` - Main SQLite database (media sources, transcripts, claims, summaries, questions)
- `README.md` - Documentation for data directory structure and contents
- `wikidata_categories.txt` - Text file with WikiData category list

---

## docs/

Comprehensive project documentation (128+ files).

### Architecture Documentation

- `ARCHITECTURE_UNIFIED.md` - High-level system architecture overview (unified view)
- `CLAIM_CENTRIC_ARCHITECTURE.md` - Documentation of claim-centric database architecture
- `DATABASE_ARCHITECTURE.md` - Database schema and design documentation
- `DATABASE_CENTRIC_ARCHITECTURE.md` - Database-first design principles and implementation
- `HCE_ARCHITECTURE.md` - Hybrid Claim Extraction (HCE) system architecture
- `PIPELINE_ARCHITECTURE.md` - Processing pipeline architecture and flow
- `DATABASE_PATTERNS.md` - Common database access patterns and best practices
- `CLARIFICATIONS_ON_ARCHITECTURE.md` - Architectural clarifications and decisions
- `API_ENTRY_POINTS.md` - Documentation of API entry points

### Feature Documentation

- `AUTOMATIC_COOKIE_DETECTION.md` - Automatic cookie detection and multi-account mode activation
- `COOKIE_PERSISTENCE_FIX.md` - Fix for cookie file persistence between sessions
- `COOKIE_FILES_PERSISTENCE_FIX.md` - Additional cookie persistence fixes
- `COOKIE_PERSISTENCE_AND_FORMAT_FIX_2025.md` - 2025 cookie persistence and format fixes
- `COOKIE_PROXY_WIRING_FIX.md` - Fix for cookie and proxy integration
- `DEDUPLICATION_SYSTEM.md` - URL and source deduplication system documentation
- `EPISODE_FIRST_MIGRATION.md` - Migration to episode-first data model
- `ERROR_HANDLING_IMPROVEMENTS.md` - Enhanced error handling and user feedback
- `PODCAST_AD_FILTERING.md` - Advertisement detection and filtering for podcasts
- `PROXY_MODE_CONSOLIDATION.md` - Proxy mode configuration consolidation
- `RSS_DISCOVERY_ARCHITECTURE_ISSUE.md` - Issues with RSS feed discovery architecture
- `RSS_FEED_GUIDE.md` - Guide for working with RSS feeds
- `RSS_MATCHING_EXPLAINED.md` - Explanation of YouTube to RSS matching algorithm
- `RSS_SPEAKER_ATTRIBUTION_COMPLETE.md` - RSS-based speaker attribution completion
- `SPEAKER_ATTRIBUTION.md` - Speaker attribution system documentation
- `SUMMARIZATION_CRASH_FIX.md` - Fix for summarization crashes
- `SUMMARIZATION_DEBUGGING_ENHANCEMENTS.md` - Comprehensive diagnostic logging added to unified mining pipeline to track progress and identify hangs at segment level
- `PARALLEL_PROCESSING_FIX.md` - Fix for parallel processing timeouts and event loop conflicts
- `SUMMARIZATION_REDUNDANCY_FIX.md` - Fix for missing widget crash and redundant file list calls
- `WIDGET_INITIALIZATION_TESTING.md` - Testing strategy to catch widget initialization bugs
- `WIDGET_TESTING_RESULTS.md` - Initial test results and analysis
- `WIDGET_TESTING_FINAL_RESULTS.md` - Definitive results: 3 real bugs found out of 122 warnings
- `BUGS_FIXED.md` - Documentation of the 3 real widget bugs found and fixed in CloudUploadsTab
- `YOUTUBE_DOWNLOAD.md` - YouTube download system documentation
- `CHANNEL_SPEAKER_MAPPINGS.md` - Channel to speaker mapping documentation
- `CHANNEL_CONTEXT_EXAMPLE.md` - Examples of channel context usage
- `CHANNEL_ID_EXTRACTION_ENHANCEMENT.md` - Enhancements to channel ID extraction

### Testing Documentation

- `TESTING_STRATEGY.md` - Overall testing strategy and approach
- `AUTOMATED_TESTING_GUIDE.md` - Guide for automated testing
- `GUI_TESTING.md` - GUI testing methodology and tools
- `INTEGRATION_TESTING.md` - Integration test documentation

### API and Integration Documentation

- `API_REFERENCE.md` - API reference for programmatic access
- `SUPABASE_INTEGRATION.md` - Supabase cloud storage integration
- `WIKIDATA_INTEGRATION.md` - WikiData API integration documentation

### System Maintenance Documentation

- `YT_DLP_UPGRADE_PROCEDURE.md` - Procedure for upgrading yt-dlp
- `YT_DLP_MONITORING_GUIDE.md` - Guide for monitoring yt-dlp releases
- `DEPENDABOT_YTDLP_SETUP.md` - Dependabot setup for yt-dlp updates
- `DEPENDENCY_UPDATE_STRATEGY.md` - Strategy for dependency updates
- `DATABASE_SERVICE_LIFECYCLE.md` - Database service lifecycle management
- `DATABASE_RECORD_DUPLICATION_AUDIT.md` - Audit of database record duplication issues
- `DATABASE_SCHEMA_USER_NOTES_FIX.md` - November 20, 2025 fix for missing user_notes column in claims table causing Review tab crash. Added automatic incremental migration system to apply schema additions on startup
- `DIST_FOLDER_CLEANUP.md` - Cleanup procedures for distribution folder
- `CLEANUP_COMPLETE_SUMMARY.md` - Summary of completed cleanup tasks

### User Guides

- `QUEUE_TAB_USER_GUIDE.md` - User guide for Queue tab functionality
- `FILE_ORGANIZATION.md` - Guide to output file organization and directory structure

### Processing Documentation

- `BATCH_PROCESSING_INTEGRATION.md` - Batch processing integration documentation
- `CONVEYOR_BELT_BOTTLENECK_ANALYSIS.md` - Analysis of processing pipeline bottlenecks
- `AUDIO_PROCESSOR_RECOVERY.md` - Audio processor recovery procedures
- `AUDIO_ONLY_FORMAT_FIX_FINAL.md` - Final fix for audio-only format handling
- `AUDIO_ONLY_FORMAT_FINAL_SOLUTION.md` - Final solution for audio-only format processing
- `ALL_TIMESTAMPS_IMPLEMENTATION.md` - Implementation of timestamp handling
- `DIVISION_BY_ZERO_FIX.md` - Fix for division by zero errors

### Archive

- `archive/` - Archived documentation (older versions and deprecated guides)
- `adr/` - Architecture Decision Records (ADRs) documenting key architectural decisions

---

## knowledge_chipper_oauth/

OAuth authentication and device-based integration system for GetReceipts.

- `README.md` - Documentation for OAuth authentication system
- `requirements_oauth.txt` - Python dependencies for OAuth server
- `getreceipts_auth.py` - Happy-style device authentication handler (auto-generated UUID + secret key, stores in ~/.getreceipts/device_auth.json)
- `getreceipts_config.py` - GetReceipts OAuth configuration
- `getreceipts_uploader.py` - **REWRITTEN Nov 2025:** HTTP API-based uploader (500+ lines → ~200 lines, -213 net). Uses HTTP requests to /api/knowledge-chipper/upload instead of Supabase SDK to bypass RLS policies. Cleaner code, better error handling.
- `integration_example.py` - Integration example code
- `manual_callback_test.py` - Manual OAuth callback testing script

---

## output/

Contains generated output files from processing operations:
- Transcript markdown files (*.md)
- JSON metadata files (*.json)
- Summary files
- Maps of Content (MOC)
- Exported files (SRT, VTT, JSON)
- Downloaded media files

**Note:** Files are organized in subdirectories by type (transcripts/, summaries/, moc/, exports/, downloads/youtube/)

---

## pretrained_models/

Contains downloaded Whisper models for offline transcription:
- `ggml-base.bin` - Whisper base model
- `ggml-medium.bin` - Whisper medium model (default)
- `ggml-large-v3.bin` - Whisper large v3 model
- Model download scripts and checksums

---

## requirements/

Modular Python dependency specifications.

- `base.txt` - Base Python dependencies required by all environments
- `dev.txt` - Development dependencies (includes base + dev tools)
- `gui.txt` - GUI-specific dependencies (PyQt6, etc.)
- `ml.txt` - Machine learning dependencies (transformers, torch, etc.)
- `optional.txt` - Optional dependencies for advanced features
- `production.txt` - Production deployment dependencies
- `testing.txt` - Testing framework dependencies
- `README.md` - Documentation of requirements organization

---

## schemas/

JSON schemas for data validation.

- `claim_schema.json` - JSON schema for claim objects
- `episode_schema.json` - JSON schema for episode metadata
- `flagship_input.v1.json` - JSON schema for flagship evaluator input
- `flagship_output.v1.json` - JSON schema for flagship evaluator output (legacy 3-dimension system)
- `flagship_output.v2.json` - JSON schema for flagship evaluator output with 6-dimension multi-profile scoring (Dec 2025)
- `miner_input.v1.json` - JSON schema for unified miner input
- `miner_output.v1.json` - JSON schema for unified miner output
- `segment_schema.json` - JSON schema for transcript segments
- `source_schema.json` - JSON schema for media source metadata
- `summary_schema.json` - JSON schema for summary objects
- `README.md` - Documentation of schema files and validation

---

## scripts/

Contains 196 utility scripts for:
- Database migrations and fixes
- Data cleanup and validation
- Testing and diagnostics
- Build and deployment automation
- Development utilities

Key scripts:
- `bundle_deno.sh` - Downloads and packages Deno JavaScript runtime for DMG installer (required for yt-dlp YouTube downloads since 2025.11.12)
- `silent_deno_installer.py` - Python script to install Deno into app bundle for DMG distribution
- `comprehensive_episode_cleanup.py` - Clean up episode data inconsistencies
- `fix_unified_schema.py` - Apply unified schema fixes to database
- `add_rss_progress_indicators.py` - Add progress tracking for RSS downloads
- `improve_rss_quality_selection.py` - Improve RSS feed quality selection
- `optimize_rss_matching.py` - Optimize YouTube to RSS matching performance
- `add_domain_column_to_claims.py` - Migration script to add domain column to claims table for field classification
- `tune_diarization.py` - Grid search hyperparameter tuning for pyannote diarization based on Bredin's 2022 challenge recipe
- `bump_version.py` - Version bumping utility
- `update_build_date.sh` - Update build date in documentation

---

## src/knowledge_system/

Main application package.

### Root Module Files

- `__init__.py` - Package initialization, version info, public API exports
- `__main__.py` - Entry point for running as module (`python -m knowledge_system`)
- `config.py` - Configuration management (loads settings, environment variables, defaults). Includes `APIKeysConfig` with support for OpenAI, Anthropic, **Google Gemini**, HuggingFace, and other providers
- `errors.py` - Custom exception hierarchy for domain-specific errors
- `logger.py` - Logging configuration and setup for application-wide logging
- `logger_system2.py` - Structured logging for System 2 processing (package root level)
- `watchers.py` - File system watchers using watchdog to monitor for new/changed files
- `py.typed` - Marker file indicating package supports type checking

### CORE/

Core orchestration and processing coordination.

- `__init__.py` - Core module initialization
- `batch_processor.py` - Intelligent batch processing system for large-scale operations with features like smart resume, dynamic parallelization, and progress persistence
- `checkpoint_manager.py` - Checkpoint management for resumable processing
- `connected_processing_coordinator.py` - Coordinates connected processing stages with audio preservation and staging
- `dynamic_parallelization.py` - Dynamic parallelization system for optimal resource usage based on hardware specs
- `enhanced_hce_pipeline.py` - Enhanced HCE pipeline with dynamic parallelization
- `intelligent_processing_coordinator.py` - Intelligent coordinator with adaptive strategies for the entire processing pipeline
- `llm_adapter.py` - LLM provider abstraction layer (OpenAI, Anthropic, **Google Gemini**, Ollama) with advanced features like rate limiting, cost tracking, and hardware-aware concurrency
- `parallel_processor.py` - Parallel processing integration for multi-core systems
- `processing_config.py` - Processing configuration management
- `segment_processor.py` - Segment-level processing coordination
- `staging_location_examples.py` - Example code for audio staging locations
- `system2_logger.py` - Structured logging for System 2 processing
- `system2_orchestrator.py` - Main orchestrator for System 2 processing with job management
- `system2_orchestrator_mining.py` - Mining integration for System 2 using UnifiedHCEPipeline
- `usage_example.py` - Usage examples for connected processing

### DATABASE/

Database models, migrations, and service layer.

- `__init__.py` - Database module initialization
- `models.py` - SQLAlchemy models for all database tables, defining the comprehensive schema including Question* models and ReviewQueueItem; **UPDATED (Dec 22, 2025):** Added speaker attribution fields (Claim.speaker, JargonTerm.introduced_by, Concept.advocated_by), added web-based claim merging fields (Claim.cluster_id, Claim.is_canonical_instance), removed Segment.speaker (deprecated)
- `service.py` - Database service layer with high-level operations including question management methods; includes extraction checkpoint methods (Dec 2025) for auth failure recovery persistence
- `review_queue_service.py` - Service for managing review queue items: load/save/update pending items for bulk review workflow persistence across sessions
- `claim_store.py` - Claim-centric storage operations for the HCE system; **UPDATED (Dec 22, 2025):** Added _extract_speaker_from_claim_data() method to populate claims.speaker from Pass 1 LLM inference (priority) or segments.speaker (fallback)
- `speaker_models.py` - Speaker and voice fingerprint models, re-exported from the unified models.py for backward compatibility
- `system2_models.py` - System 2 processing job and checkpoint models for orchestration and LLM tracking
- `alembic_migrations.py` - Alembic migration management
- `apply_hce_migrations.py` - Apply HCE-specific database migrations
- `migrate_legacy_data.py` - Migrate legacy data to new schema
- `migrate_to_claim_centric.py` - Migrate to claim-centric architecture
- `load_wikidata_vocab.py` - Load WikiData vocabulary into database
- `download_podcast_categories.py` - Download podcast category taxonomy
- `download_wikidata_taxonomy.py` - Download WikiData taxonomy data
- `wikidata_seed.json` - Seed data for WikiData categories (~200 categories)
- `wikidata_*.json` - Various WikiData taxonomy files (conceptual, podcast, merged)

#### DATABASE/MIGRATIONS/

SQL migration files for database schema changes.

- `__init__.py` - Migrations module initialization
- `unified_schema.sql` - Unified database schema (current production schema)
- `claim_centric_schema.sql` - Claim-centric schema definition
- `add_source_aliases.sql` - Add source_id_aliases table for URL deduplication
- `add_subtitle_column.sql` - Add subtitle column to media sources
- `2025_01_15_claim_tier_validation.sql` - Claim tier validation rules
- `2025_01_15_quality_ratings.sql` - Quality rating system for claims
- `2025_08_18_hce_columns.sql` - HCE system columns
- `2025_08_18_hce_compat.sql` - HCE compatibility layer
- `2025_08_31_upload_tracking.sql` - Upload tracking for cloud sync
- `2025_10_15_partial_download_tracking.sql` - Partial download tracking
- `2025_11_05_source_stage_status.sql` - Source stage status tracking for queue visibility
- `2025_11_16_add_questions_system.sql` - Question mapping system tables and views
- `2025_11_16_add_user_notes_to_claims.sql` - Add user_notes field to claims table
- `2025_11_16_fix_verification_status.sql` - Fix verification_status enum to include 'unverifiable'
- `001_rename_videos_to_media_sources.py` - Rename videos table to media_sources
- `003_add_enhanced_youtube_fields.py` - Add enhanced YouTube metadata fields
- `003_speaker_assignment_enhancements.py` - Speaker assignment enhancements
- `004_add_entity_evidence_tables.py` - Add entity and evidence tables
- `004_channel_host_mappings.py` - Channel to host mapping tables
- `migration_004_channel_host_mappings.py` - Python migration for channel mappings
- `system2_migration.py` - System 2 processing tables migration
- `2025_12_07_persistent_speaker_profiles.sql` - Persistent speaker profiles for cross-episode voice recognition
- `2025_12_20_claims_first_support.sql` - Claims-first pipeline database schema: new columns for transcript source/quality, candidate_claims table for re-evaluation, claims_first_processing_log for metrics
- `2025_12_22_add_speaker_to_entities.sql` - **NEW:** Add speaker attribution to entity tables (claims.speaker, jargon.introduced_by, concepts.advocated_by), add web-based claim merging support (cluster_id, is_canonical_instance), migrate existing data from segments.speaker, deprecate segment-level speaker attribution
- `2025_12_22_multi_profile_scoring.sql` - Multi-profile scoring system for claims
- `2025_12_21_add_youtube_ai_summary.sql` - **NEW (Dec 2025):** YouTube AI summary integration: adds youtube_ai_summary, youtube_ai_summary_fetched_at, youtube_ai_summary_method columns to media_sources for storing YouTube's AI-generated summaries alongside Knowledge_Chipper summaries
- `2025_12_22_multi_profile_scoring.sql` - Multi-profile scoring system: dimensions JSON, profile_scores JSON, best_profile TEXT, temporal_stability REAL, scope REAL columns with indexes
- `2025_12_22_review_queue.sql` - Review queue table for bulk review workflow persistence: stores pending/accepted/rejected items across sessions until synced to GetReceipts

### EXAMPLES/

Example code and usage demonstrations.

- Example scripts demonstrating API usage and integration patterns

### PROCESSORS/CLAIMS_FIRST/ (December 2025)

Claims-first pipeline module for extracting claims before speaker attribution.

- `__init__.py` - Module initialization with public API exports
- `config.py` - ClaimsFirstConfig dataclass with validation and enum types
- `transcript_fetcher.py` - TranscriptFetcher class for YouTube/Whisper transcript abstraction with quality assessment
- `timestamp_matcher.py` - TimestampMatcher class for fuzzy matching evidence quotes to transcript timestamps
- `lazy_speaker_attribution.py` - LazySpeakerAttributor class for targeted LLM-based speaker attribution
- `pipeline.py` - ClaimsFirstPipeline orchestrator coordinating transcript → extraction → evaluation → attribution; includes ClaimsFirstResult with rejected_claims tracking, quality_assessment, promote_claim(), generate_summaries() (Dec 2025)

### GUI/

PyQt6-based graphical user interface.

- `__init__.py` - GUI module initialization
- `__main__.py` - GUI entry point
- `main_window_pyqt6.py` - Main application window with tab management
- `batch_processing_widget.py` - Batch processing UI widget
- `legacy_dialogs.py` - Legacy dialog implementations (being phased out)
- `startup_integration.py` - Startup integration and initialization
- `queue_event_bus.py` - Real-time event bus for queue status updates

#### GUI/ADAPTERS/

GUI adapters for backend integration.

- `__init__.py` - Adapters module initialization
- `hce_adapter.py` - Adapter for HCE system integration with GUI

#### GUI/ASSETS/

GUI asset resources.

- `__init__.py` - Assets module initialization
- `icons.py` - Icon resources and management

#### GUI/COMPONENTS/

Reusable GUI components.

- `__init__.py` - Components module initialization
- `base_tab.py` - Base class for all tab implementations
- `bulk_action_toolbar.py` - Toolbar for bulk review actions (Accept/Reject/Set Tier) that appears when items are selected in review queue
- `completion_summary.py` - Completion summary display widget
- `enhanced_error_dialog.py` - Enhanced error dialog with detailed information
- `enhanced_progress_display.py` - Enhanced progress display with rich formatting; includes PipelineProgressDisplay class (Dec 2025) for 6-stage claims-first pipeline with batch mode, pause/resume, quality warnings
- `file_operations.py` - File operation utilities for GUI
- `filter_bar.py` - Horizontal filter bar for review queue with Type, Video, Status, Tier, and Search filters
- `model_preloader.py` - Model preloading widget for Whisper models
- `progress_tracking.py` - Progress tracking components
- `review_dashboard.py` - Collapsible dashboard showing real-time processing and review statistics (videos processed, items extracted, pending/accepted/rejected counts)
- `review_queue.py` - Unified review queue components: ReviewItem data class, ReviewQueueModel (QAbstractTableModel), ReviewQueueFilterModel (QSortFilterProxyModel), ReviewQueueView (QTableView)
- `rich_log_display.py` - Rich log display with syntax highlighting
- `simple_progress_bar.py` - Simple progress bar widget

#### GUI/CORE/

Core GUI infrastructure.

- Core GUI utilities and base classes

#### GUI/DIALOGS/

Dialog windows for various operations.

- `__init__.py` - Dialogs module initialization
- `batch_speaker_dialog.py` - Batch speaker assignment dialog
- `claim_validation_dialog.py` - Claim validation review dialog
- `comprehensive_first_run_dialog.py` - Comprehensive first-run setup wizard
- `crash_recovery_dialog.py` - Crash recovery dialog
- `diarization_ffmpeg_dialog.py` - Diarization and FFmpeg setup dialog
- `diarization_setup_dialog.py` - Speaker diarization setup dialog
- `ffmpeg_prompt_dialog.py` - FFmpeg installation prompt
- `ffmpeg_setup_dialog.py` - FFmpeg setup wizard
- `first_run_setup_dialog.py` - First run setup dialog
- `hce_update_dialog.py` - HCE system update dialog
- `model_tier_selection_dialog.py` - Model tier selection for evaluators
- `queue_detail_dialog.py` - Queue item detail viewer
- `sign_up_dialog.py` - User sign-up dialog
- `speaker_assignment_dialog.py` - Speaker assignment dialog

#### GUI/MIXINS/

GUI mixins for shared functionality.

- Mixin classes providing reusable GUI behaviors

#### GUI/TABS/

Main application tabs (18 total).

- `__init__.py` - Tabs module initialization
- `api_keys_tab.py` - API key management tab
- `batch_processing_tab.py` - Batch processing configuration and execution tab
- `claim_search_tab.py` - Claim search and filtering tab
- `cloud_uploads_tab.py` - Cloud upload status and management tab
- `extract_tab.py` - **NEW (Dec 2025):** Claims-first extraction tab with two-pane editor, LLM selection per stage, 6-stage progress display, quality assessment panel, rejected claims with promote button
- `introduction_tab.py` - Introduction and welcome tab with feature overview
- `monitor_tab.py` - System monitoring and diagnostics tab
- `process_tab.py` - Processing pipeline control tab
- `prompts_tab.py` - Prompt template management tab with dynamic prompt selection display for Unified Miner (shows content-type-specific, selectivity-based, and fallback prompts) and standard assignment for Flagship Evaluator and Skimmer
- `question_review_tab.py` - Question mapping review and approval tab (NEW: Nov 2025)
- `queue_tab.py` - Queue tab for real-time pipeline status visualization
- `review_tab_system2.py` - Review tab for System 2 processing results and claim evaluation
- `summarization_tab.py` - Summarization (Sunrise) tab with database browser supporting sortable columns including Date Added

**DELETED in v4.0.0:**
- ~~`speaker_attribution_tab.py`~~ - Replaced by claims-first pipeline
- `summary_cleanup_tab.py` - Summary cleanup and validation tab
- `sync_status_tab.py` - Synchronization status tab for cloud services
- `transcription_tab.py` - Transcription configuration and execution tab
- `settings_tab.py` - Application settings tab (not listed above but exists)
- `logs_tab.py` - Log viewer tab (not listed above but exists)

#### GUI/UTILS/

GUI utility functions.

- GUI-specific utility functions and helpers
- `log_integration.py` - Integration of backend logging with GUI display

#### GUI/WIDGETS/

Specialized widgets.

- `__init__.py` - Widgets module initialization
- `cookie_file_manager.py` - Cookie file management widget for multi-account downloads
- `model_notification_widget.py` - Model availability notification widget

#### GUI/WORKERS/

Background worker threads for GUI operations.

- `__init__.py` - Workers module initialization
- `auto_sync_worker.py` - **NEW (Dec 22, 2025):** Background worker for auto-syncing accepted items to GetReceipts immediately after acceptance; handles offline gracefully by queuing for retry; includes speaker attribution in uploaded data
- `dmg_update_worker.py` - DMG update checker worker
- `ffmpeg_installer.py` - FFmpeg installation worker
- `processing_workers.py` - Processing operation workers; includes ClaimsFirstWorker class (Dec 2025) with stage signals, pause/resume/cancel, quality warning signals
- `update_worker.py` - Application update checker worker

### INTEGRATIONS/

External service integrations.

- Integration modules for third-party services

### PROCESSORS/

Media processing and transformation.

- `__init__.py` - Processors module initialization
- `base.py` - Base processor class with common functionality
- `audio_processor.py` - Audio file processing with transcription support; diarization features deprecated in v4.0.0 (see claims-first pipeline); enhanced (Dec 2025) with YouTube AI summary section in markdown output and comprehensive timestamp hyperlinking (6 regex patterns for all formats)
- `document_processor.py` - Document processing (PDF, eBook)
- `dual_summary_processor.py` - **NEW (Dec 2025):** Dual summary processor for comparing YouTube AI vs local LLM summaries; runs both paths in parallel for quality comparison and testing
- `html.py` - HTML document processing
- `pdf.py` - PDF document processing
- `registry.py` - Processor registry for dynamic processor selection
- `rss_processor.py` - RSS feed processing
- `unified_batch_processor.py` - Unified batch processor for multiple files
- `whisper_cpp_transcribe.py` - Transcription using pywhispercpp Python binding with DTW word-level timestamps
- `youtube_download.py` - YouTube video/audio download
- `youtube_download_with_ai_summary.py` - **NEW (Dec 2025):** Enhanced YouTube downloader that wraps existing YouTubeDownloadProcessor and adds YouTube AI summary scraping; saves AI summary to database automatically; no breaking changes to existing pipeline

**DELETED in v4.0.0 (Claims-First Migration):**
- ~~`diarization.py`~~ - Replaced by claims-first pipeline (restore from `speaker-first-archive` branch if needed)
- ~~`speaker_processor.py`~~ - Replaced by claims-first pipeline

#### PROCESSORS/HCE/

Hybrid Claim Extraction system.

- `__init__.py` - HCE module initialization and public API exports
- `config_flex.py` - Flexible configuration for HCE pipeline
- `context_expansion.py` - Context expansion for claims
- `discourse.py` - Discourse analysis and structure
- `entity_converters.py` - Entity type converters
- `export.py` - Export HCE results to various formats
- `flagship_evaluator.py` - Flagship claim evaluator for ranking and filtering claims
- `global_index.py` - Global index for cross-document references
- `health.py` - Health checks for HCE system
- `io_utils.py` - I/O utilities for HCE
- `model_uri_parser.py` - Parse model URIs (ollama://, openai://, local://, etc.)
- `parallel_processor.py` - Parallel processing infrastructure for HCE with auto-scaling workers
- `relations.py` - Relationship extraction between entities (currently disabled, returns empty list)
- `schema_validator.py` - Validate and repair HCE output against JSON schemas
- `sqlite_schema.sql` - SQLite schema for HCE storage tables
- `storage_sqlite.py` - SQLite storage layer for HCE results with bulk insert optimization
- `structured_categories.py` - WikiData-based structured category assignment
- `temporal_numeric.py` - Temporal and numeric data extraction
- `temporality.py` - Temporality analysis for claims
- `types.py` - Type definitions for HCE system (EpisodeBundle, ScoredClaim, PipelineOutputs, etc.)
- `unified_miner.py` - **ACTIVE:** Unified mining engine that extracts all entity types (claims, jargon, people, concepts) in a single pass; now supports injecting synced refinements from GetReceipts.org to prevent previously-identified extraction mistakes
- `unified_pipeline.py` - **ACTIVE:** Main HCE pipeline orchestrating mining → evaluation → summarization → categorization

##### PROCESSORS/HCE/EVALUATORS/

Claim evaluators for quality assessment.

- `__init__.py` - Evaluators module initialization
- `concepts_evaluator.py` - Evaluate concept quality
- `jargon_evaluator.py` - Evaluate jargon definitions
- `people_evaluator.py` - Evaluate people/entity extractions

##### PROCESSORS/HCE/MODELS/

ML models for HCE.

- `__init__.py` - Models module initialization
- `cross_encoder.py` - Cross-encoder for semantic similarity
- `embedder.py` - Sentence embeddings for semantic search
- `llm_system2.py` - LLM integration for System 2 processing

##### PROCESSORS/HCE/PROMPTS/

Prompt templates for legacy HCE system (15 prompt files - DEPRECATED).

**LEGACY PROMPTS (Segment-Based Architecture - Being Phased Out):**
- `concepts_evaluator.txt` - Concepts evaluation prompt (legacy)
- `flagship_evaluator.txt` - Flagship evaluation prompt (legacy - functionality merged into two-pass extraction_pass.txt)
- `jargon_evaluator.txt` - Jargon evaluation prompt (legacy)
- `long_summary.txt` - Long-form summary generation prompt (legacy - superseded by two-pass synthesis_pass.txt)
- `people_evaluator.txt` - People/entity evaluation prompt (legacy)
- `short_summary.txt` - Short summary generation prompt (legacy)
- `unified_miner_conservative.txt` - Conservative mining prompt (legacy)
- `unified_miner_document.txt` - Document-specific mining prompt (legacy)
- `unified_miner_liberal.txt` - Liberal mining prompt (legacy)
- `unified_miner_moderate.txt` - Moderate mining prompt (legacy)
- `unified_miner_transcript_own.txt` - Own-transcript mining prompt V1 (legacy)
- `unified_miner_transcript_own_V2.txt` - Own-transcript mining prompt V2 (legacy)
- `unified_miner_transcript_own_V3.txt` - Own-transcript mining prompt V3 (legacy)
- `unified_miner_transcript_third_party.txt` - Third-party transcript mining prompt (legacy)
- `unified_miner.txt` - Base unified mining prompt (legacy)

**Note:** These prompts are being phased out in favor of the two-pass architecture (see PROCESSORS/TWO_PASS/ below).

#### PROCESSORS/TWO_PASS/

**NEW ARCHITECTURE (December 2025):** Two-pass whole-document processing system.

- `__init__.py` - Two-pass module initialization and public API exports
- `pipeline.py` - TwoPassPipeline orchestrator: coordinates extraction → synthesis passes
- `extraction_pass.py` - Pass 1: Extract and score all entities from complete document in one API call
- `synthesis_pass.py` - Pass 2: Generate world-class long summary from Pass 1 results

##### PROCESSORS/TWO_PASS/PROMPTS/

**ACTIVE PROMPTS (2 prompts - this is the current system):**

- `extraction_pass.txt` - **ACTIVE:** Pass 1 extraction prompt; processes entire transcripts in one API call; extracts and scores all entities (claims, jargon, people, mental models); includes 6-dimension scoring with weighted formula, speaker inference with confidence, rejection proposals, evidence spans for all entities, and 5 worked examples; replaces 11 old segment-based prompts; enhanced December 2025
- `synthesis_pass.txt` - **ACTIVE:** Pass 2 synthesis prompt; generates world-class 3-5 paragraph summary from high-importance claims (≥7.0); integrates all entity types thematically; uses YouTube AI summary as reference; sophisticated analytical prose with thematic organization

#### PROCESSORS/QUESTION_MAPPER/

Question mapping system (NEW: November 2025) - Optional post-processing feature.

- `__init__.py` - Question mapper module initialization
- `assignment.py` - Claim-to-question assignment stage (Stage 3)
- `discovery.py` - Question discovery from claims (Stage 1)
- `hce_integration.py` - Integration with HCE pipeline
- `merger.py` - Question deduplication and merging (Stage 2)
- `models.py` - Pydantic data models for question mapper
- `orchestrator.py` - Question mapper pipeline orchestrator

##### PROCESSORS/QUESTION_MAPPER/PROMPTS/

Question mapper LLM prompts (3 prompts - optional feature).

- `assignment.txt` - Claim assignment prompt with 7 relation types
- `discovery.txt` - Question discovery prompt with taxonomy
- `merger.txt` - Question merging and deduplication prompt

### SERVICES/

High-level service layer.

- `__init__.py` - Services module initialization
- `browser_cookie_manager.py` - **NEW (Dec 2025):** Loads YouTube authentication cookies from system browsers (Chrome/Safari/Firefox) and converts to Playwright format; reuses yt-dlp cookie infrastructure for seamless integration
- `claims_upload_service.py` - Upload claims to cloud storage
- `device_auth.py` - Device authentication for GetReceipts.org integration (Happy-style auto-auth)
- `download_base.py` - Base download service class
- `download_scheduler.py` - Schedule and manage downloads
- `file_generation.py` - Generate output files from database
- `multi_account_downloader.py` - Multi-account YouTube downloader
- `oauth_callback_server.py` - OAuth callback server for authentication
- `playwright_youtube_scraper.py` - **NEW (Dec 2025):** Playwright-based YouTube AI summary scraper; automates clicking "Ask" → "Summarize", waits 12-60 seconds for generation, scrapes complete multi-paragraph summaries with fuzzy timestamp matching
- `podcast_episode_searcher.py` - Search for podcast episodes
- `podcast_rss_downloader.py` - Download podcast episodes from RSS feeds
- `prompt_sync.py` - **NEW:** Syncs approved prompt refinements from GetReceipts.org to local files; refinements are bad_example entries that prevent previously-identified extraction mistakes
- `queue_snapshot_service.py` - Queue snapshot service for pipeline status
- `session_based_scheduler.py` - Session-based download scheduler for anti-bot; includes authentication failure checkpoint methods (Dec 2025) for save/resume on 401/403/bot detection
- `speaker_learning_service.py` - Speaker learning and adaptation service
- `supabase_auth.py` - Supabase authentication
- `supabase_storage.py` - Supabase cloud storage operations
- `supabase_sync.py` - Supabase synchronization service
- `unified_download_orchestrator.py` - Unified download orchestrator (YouTube, RSS, local)
- `unified_download_orchestrator_v2.py` - V2 of unified download orchestrator
- `wikidata_categorizer.py` - WikiData-based categorization service
- `youtube_download_service.py` - YouTube download service
- `youtube_to_podcast_mapper.py` - Map YouTube URLs to podcast RSS feeds

### SUPERCHUNK/

SuperChunk system for advanced document processing (experimental).

- `__init__.py` - SuperChunk module initialization
- `canonicalization.py` - Text canonicalization
- `config.py` - SuperChunk configuration
- `embeddings.py` - Embedding generation and management
- `extractors.py` - Information extractors
- `gates.py` - Quality gates for filtering
- `landmarks.py` - Document landmark detection
- `ledger.py` - Processing ledger for tracking
- `linker.py` - Entity linking
- `llm_adapter.py` - LLM adapter for SuperChunk
- `mapper.py` - Mapping between representations
- `observability.py` - Observability and monitoring
- `retrieval.py` - Retrieval system
- `runner.py` - SuperChunk pipeline runner
- `scorecard.py` - Quality scoring
- `segmenter.py` - Document segmentation
- `signals.py` - Signal processing
- `synthesizer.py` - Information synthesis
- `validators.py` - Validation utilities
- `vector_store.py` - Vector storage
- `verifier.py` - Verification system

### UTILS/

Utility functions and helpers (90+ utility files).

- `__init__.py` - Utils module initialization
- `ad_detector.py` - Advertisement detection in podcast transcripts
- `deduplication.py` - URL and source deduplication
- `llm_speaker_suggester.py` - LLM-based speaker name suggestion
- `llm_speaker_validator.py` - LLM-based speaker name validation
- `rss_feed_extractor.py` - Extract RSS feeds from Apple Podcasts/RSS.com URLs
- `warning_suppressions.py` - Centralized warning suppression configuration
- Additional 80+ utility modules for various functions

#### UTILS/PROXY/

Proxy management utilities.

- Proxy configuration and management utilities

### SCHEMAS/

Pydantic models for standardized data structures.

- `__init__.py` - Schemas module initialization with public exports
- `transcription_output.py` - Standardized JSON output schema for transcription + diarization pipeline (Word, Segment, StableRegion, TranscriptionOutput models)

### VOICE/

Voice fingerprinting and speaker verification. **DEPRECATED in v4.0.0 - replaced by claims-first pipeline.**

- `__init__.py` - Voice module initialization (exports removed)

**DELETED in v4.0.0 (Claims-First Migration):**
- ~~`accuracy_testing.py`~~ - Replaced by claims-first pipeline
- ~~`speaker_verification_service.py`~~ - Replaced by claims-first pipeline
- ~~`voice_fingerprinting.py`~~ - Replaced by claims-first pipeline (restore from `speaker-first-archive` branch if needed)

### WORKERS/

Background worker processes.

- Background worker implementations for asynchronous processing

---

## tests/

Comprehensive test suite with 70+ test files including:
- Unit tests for all major components
- Integration tests for end-to-end workflows
- GUI tests with xvfb support
- Performance tests
- Database migration tests
- Question mapper tests (14 tests)

Key test files:
- `test_multi_profile_scorer.py` - Multi-profile scoring system unit tests (6-dimension validation, profile weights, max-scoring)
- `test_flagship_evaluator_v2.py` - Flagship evaluator V2 integration tests (dimension processing, backward compatibility)
- `test_question_mapper.py` - Question mapper system tests (14 tests, all passing)
- `test_database_imports.py` - Database export validation
- `test_basic.py` - Basic functionality tests
- Additional 65+ test modules

---

## state/

Runtime state directory for:
- Session state persistence
- Temporary processing files
- Cache files
- Lock files

---

## logs/

Application log files organized by date and component (380+ log files).

---

## tmp/

Temporary files during processing (automatically cleaned up).

---

## test_output/

Output from test runs for verification and debugging.

---

## test_models/

Test fixtures and mock models for testing.

---

## test_transcription/

Test fixtures for transcription testing.

---

## build/

Build artifacts and distribution packages.

---

## dist/

Distribution packages (100+ build artifacts).

---

*End of Manifest*
