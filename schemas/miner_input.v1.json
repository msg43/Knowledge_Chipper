{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "MinerInputV1",
  "description": "Input schema for the Unified Miner system extracting claims, jargon, people, and mental models",
  "type": "object",
  "required": ["segment"],
  "properties": {
    "segment": {
      "type": "object",
      "required": ["segment_id", "speaker", "timestamp_start", "timestamp_end", "text"],
      "properties": {
        "segment_id": {
          "type": "string",
          "description": "Unique identifier for the segment",
          "pattern": "^[a-zA-Z0-9_-]+$"
        },
        "speaker": {
          "type": "string",
          "description": "Name or identifier of the speaker"
        },
        "timestamp_start": {
          "type": "string",
          "description": "Start timestamp in HH:MM:SS format",
          "pattern": "^\\d{2}:\\d{2}:\\d{2}$"
        },
        "timestamp_end": {
          "type": "string",
          "description": "End timestamp in HH:MM:SS format",
          "pattern": "^\\d{2}:\\d{2}:\\d{2}$"
        },
        "text": {
          "type": "string",
          "description": "The transcript text to analyze",
          "minLength": 1
        },
        "topic_guess": {
          "type": ["string", "null"],
          "description": "Optional topic hint for the segment"
        }
      }
    },
    "context": {
      "type": "object",
      "description": "Optional context about the episode",
      "properties": {
        "episode_id": {
          "type": "string",
          "description": "Unique identifier for the episode"
        },
        "episode_title": {
          "type": "string",
          "description": "Title of the episode"
        },
        "previous_segments": {
          "type": "array",
          "description": "Previous segments for context",
          "items": {
            "type": "object",
            "properties": {
              "segment_id": {"type": "string"},
              "speaker": {"type": "string"},
              "text": {"type": "string"}
            }
          }
        }
      }
    }
  }
}
