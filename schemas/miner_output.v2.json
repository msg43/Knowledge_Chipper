{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "MinerOutputV2",
  "description": "Enhanced output schema for Unified Miner - matches database requirements with full evidence structure",
  "type": "object",
  "required": ["claims", "jargon", "people", "mental_models"],
  "properties": {
    "claims": {
      "type": "array",
      "description": "Extracted claims from the content",
      "items": {
        "type": "object",
        "required": ["claim_text", "claim_type", "stance", "evidence_spans"],
        "properties": {
          "claim_text": {
            "type": "string",
            "description": "The precise claim statement",
            "minLength": 10
          },
          "claim_type": {
            "type": "string",
            "enum": ["factual", "causal", "normative", "forecast", "definition"],
            "description": "Type of claim being made"
          },
          "stance": {
            "type": "string",
            "enum": ["asserts", "questions", "opposes", "neutral"],
            "description": "Speaker's stance toward the claim"
          },
          "evidence_spans": {
            "type": "array",
            "description": "Array of evidence supporting this claim (can have multiple)",
            "minItems": 1,
            "items": {
              "type": "object",
              "required": ["segment_id", "quote", "t0", "t1"],
              "properties": {
                "segment_id": {
                  "type": "string",
                  "description": "ID of the segment where this evidence appears"
                },
                "quote": {
                  "type": "string",
                  "description": "The exact quote supporting the claim"
                },
                "t0": {
                  "type": "string",
                  "description": "Start timestamp (MM:SS or HH:MM:SS)"
                },
                "t1": {
                  "type": "string",
                  "description": "End timestamp (MM:SS or HH:MM:SS)"
                },
                "context_t0": {
                  "type": "string",
                  "description": "Start of extended context (optional)"
                },
                "context_t1": {
                  "type": "string",
                  "description": "End of extended context (optional)"
                },
                "context_text": {
                  "type": "string",
                  "description": "Extended context around the quote (1-2 sentences)"
                },
                "context_type": {
                  "type": "string",
                  "enum": ["exact", "sentence", "paragraph"],
                  "description": "Type of context provided",
                  "default": "exact"
                }
              }
            }
          }
        }
      }
    },
    "jargon": {
      "type": "array",
      "description": "Technical terms and domain-specific vocabulary",
      "items": {
        "type": "object",
        "required": ["term", "definition", "domain", "evidence_spans"],
        "properties": {
          "term": {
            "type": "string",
            "description": "The technical term or jargon"
          },
          "definition": {
            "type": "string",
            "description": "Brief definition of the term"
          },
          "domain": {
            "type": "string",
            "enum": ["economics", "technology", "medical", "legal", "scientific", "business", "other"],
            "description": "Domain or field this jargon belongs to"
          },
          "evidence_spans": {
            "type": "array",
            "description": "Array of evidence showing usage of this term",
            "minItems": 1,
            "items": {
              "type": "object",
              "required": ["segment_id", "quote", "t0", "t1"],
              "properties": {
                "segment_id": {
                  "type": "string",
                  "description": "ID of the segment where this term appears"
                },
                "quote": {
                  "type": "string",
                  "description": "Quote showing how the term is used"
                },
                "t0": {
                  "type": "string",
                  "description": "Start timestamp (MM:SS or HH:MM:SS)"
                },
                "t1": {
                  "type": "string",
                  "description": "End timestamp (MM:SS or HH:MM:SS)"
                },
                "context_text": {
                  "type": "string",
                  "description": "Extended context showing usage"
                }
              }
            }
          }
        }
      }
    },
    "people": {
      "type": "array",
      "description": "People and organizations mentioned in the content",
      "items": {
        "type": "object",
        "required": ["name", "normalized_name", "entity_type", "mentions"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Name of the person/organization as mentioned"
          },
          "normalized_name": {
            "type": "string",
            "description": "Standardized form of the name (e.g., 'First Last')"
          },
          "entity_type": {
            "type": "string",
            "enum": ["person", "organization"],
            "description": "Whether this is a person or organization"
          },
          "role_or_description": {
            "type": "string",
            "description": "Their role or how they're described"
          },
          "confidence": {
            "type": "number",
            "minimum": 0,
            "maximum": 1,
            "description": "Confidence in the identification (0.0-1.0)",
            "default": 0.8
          },
          "external_ids": {
            "type": "object",
            "description": "External identifiers for entity resolution",
            "properties": {
              "wikidata": {
                "type": "string",
                "description": "WikiData QID (e.g., 'Q47213')"
              },
              "wikipedia": {
                "type": "string",
                "description": "Wikipedia page title"
              }
            }
          },
          "mentions": {
            "type": "array",
            "description": "Array of all mentions of this person/org",
            "minItems": 1,
            "items": {
              "type": "object",
              "required": ["segment_id", "surface_form", "quote", "t0", "t1"],
              "properties": {
                "segment_id": {
                  "type": "string",
                  "description": "ID of the segment where mentioned"
                },
                "surface_form": {
                  "type": "string",
                  "description": "How they were referred to in this mention"
                },
                "quote": {
                  "type": "string",
                  "description": "Quote showing the mention"
                },
                "t0": {
                  "type": "string",
                  "description": "Start timestamp (MM:SS or HH:MM:SS)"
                },
                "t1": {
                  "type": "string",
                  "description": "End timestamp (MM:SS or HH:MM:SS)"
                }
              }
            }
          }
        }
      }
    },
    "mental_models": {
      "type": "array",
      "description": "Frameworks, concepts, or approaches discussed",
      "items": {
        "type": "object",
        "required": ["name", "definition", "evidence_spans"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Name of the mental model or framework"
          },
          "definition": {
            "type": "string",
            "description": "Explanation of the model/framework"
          },
          "aliases": {
            "type": "array",
            "description": "Alternative names for this model",
            "items": {
              "type": "string"
            }
          },
          "evidence_spans": {
            "type": "array",
            "description": "Array of evidence showing discussion/application",
            "minItems": 1,
            "items": {
              "type": "object",
              "required": ["segment_id", "quote", "t0", "t1"],
              "properties": {
                "segment_id": {
                  "type": "string",
                  "description": "ID of the segment where discussed"
                },
                "quote": {
                  "type": "string",
                  "description": "Quote showing the discussion"
                },
                "t0": {
                  "type": "string",
                  "description": "Start timestamp (MM:SS or HH:MM:SS)"
                },
                "t1": {
                  "type": "string",
                  "description": "End timestamp (MM:SS or HH:MM:SS)"
                },
                "context_text": {
                  "type": "string",
                  "description": "Extended context showing explanation/application"
                }
              }
            }
          }
        }
      }
    }
  }
}
